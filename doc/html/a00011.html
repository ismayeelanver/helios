<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Helios: src/include/key.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Helios<span id="projectnumber">&#160;0.1.0</span>
   </div>
   <div id="projectbrief">Minimalist tiling window manager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">key.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;cstdlib&gt;</code><br />
<code>#include &lt;xcb/xcb.h&gt;</code><br />
<code>#include &lt;xcb/xcb_ewmh.h&gt;</code><br />
<code>#include &lt;xcb/xcb_keysyms.h&gt;</code><br />
<code>#include &lt;xcb/xproto.h&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
</div>
<p><a href="a00011_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5f32436c8d62ad23dac4766401b3b450" id="r_a5f32436c8d62ad23dac4766401b3b450"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a5f32436c8d62ad23dac4766401b3b450">grab_key</a> (xcb_connection_t *conn, uint16_t mod, uint32_t keysym, xcb_window_t window)</td></tr>
<tr class="memdesc:a5f32436c8d62ad23dac4766401b3b450"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grabs a key so that it will not be passed to other X clients.  <br /></td></tr>
<tr class="separator:a5f32436c8d62ad23dac4766401b3b450"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5f32436c8d62ad23dac4766401b3b450" name="a5f32436c8d62ad23dac4766401b3b450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f32436c8d62ad23dac4766401b3b450">&#9670;&#160;</a></span>grab_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void grab_key </td>
          <td>(</td>
          <td class="paramtype">xcb_connection_t *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>keysym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xcb_window_t&#160;</td>
          <td class="paramname"><em>window</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Grabs a key so that it will not be passed to other X clients. </p>
<p>This function will grab a key so that it will not be passed to other X clients. It will use the XCB library to do this. The function takes four parameters: a pointer to an XCB connection, a modifier mask, a keysym, and a window ID. The function will return nothing.</p>
<p>The first thing the function does is to allocate a key symbols structure. This structure will be used to look up the keycode associated with the given keysym. The function does this by calling xcb_key_symbols_alloc(). The function then looks up the keycode associated with the given keysym by calling xcb_key_symbols_get_keycode(). If this call fails, the function will print an error message and exit with a status of EXIT_FAILURE.</p>
<p>If the call succeeds, the function will then call xcb_grab_key() to grab the key. The function passes 1 as the first parameter to xcb_grab_key() to specify that the key should be grabbed for the given window. The second parameter is the window ID, the third is the modifier mask, the fourth is the keycode, the fifth is the grab mode, and the sixth is the grab mode. The function then calls xcb_flush() to flush the XCB connection.</p>
<p>Finally, the function frees the key symbols structure by calling xcb_key_symbols_free().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The XCB connection to use. </td></tr>
    <tr><td class="paramname">mod</td><td>The modifier mask to use. </td></tr>
    <tr><td class="paramname">keysym</td><td>The keysym to use. </td></tr>
    <tr><td class="paramname">window</td><td>The window ID to use. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00011_source.html#l00040">40</a> of file <a class="el" href="a00011_source.html">key.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>                                          {</div>
<div class="line"><span class="lineno">   42</span>  <span class="keyword">auto</span> *keysyms = xcb_key_symbols_alloc(conn);</div>
<div class="line"><span class="lineno">   43</span>  <span class="keyword">auto</span> *keycode = xcb_key_symbols_get_keycode(keysyms, keysym);</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>  <span class="keywordflow">if</span> (keycode) {</div>
<div class="line"><span class="lineno">   46</span>    xcb_grab_key(conn, 1, window, mod, *keycode, XCB_GRAB_MODE_ASYNC,</div>
<div class="line"><span class="lineno">   47</span>                 XCB_GRAB_MODE_ASYNC);</div>
<div class="line"><span class="lineno">   48</span>    xcb_flush(conn);</div>
<div class="line"><span class="lineno">   49</span>    free(keycode);</div>
<div class="line"><span class="lineno">   50</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   51</span>    std::cerr &lt;&lt; <span class="stringliteral">&quot;Unable to find keycode for the given keysym.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   52</span>    exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">   53</span>  }</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>  xcb_key_symbols_free(keysyms);</div>
<div class="line"><span class="lineno">   56</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="a00005_source.html#l00017">WindowManager::WindowManager()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 16 2024 11:43:28 for Helios by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
